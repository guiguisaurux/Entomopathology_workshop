set.seed = 62 # For reproducibility

groups <- list(
  group1 = c(1, 2, 3),
  group2 = c(4, 5, 6),
  group3 = c(7, 8, 9),
  group4 = c(10, 11, 12),
  group5 = c(13, 14, 15),
  group6 = c(16, 17, 18),
  group7 = c(19, 20, 21),
  group8 = c(22, 23, 24),
  group9 = c(25, 26, 27)
)



# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1",
          "B1","B1", "B1"
          )

Bloc.1 <- data.frame(Bloc, randomized_vector)

#bloc 2
# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2",
          "B2","B2", "B2"
)

Bloc.2 <- data.frame(Bloc, randomized_vector)

#bloc 3
# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3",
          "B3","B3", "B3"
)

Bloc.3 <- data.frame(Bloc, randomized_vector)

# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4",
          "B4","B4", "B4"
)

Bloc.4 <- data.frame(Bloc, randomized_vector)


# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5",
          "B5","B5", "B5"
)

Bloc.5 <- data.frame(Bloc, randomized_vector)


# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6",
          "B6","B6", "B6"
)

Bloc.6 <- data.frame(Bloc, randomized_vector)


# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7",
          "B7","B7", "B7"
)

Bloc.7 <- data.frame(Bloc, randomized_vector)


# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8",
          "B8","B8", "B8"
)

Bloc.8 <- data.frame(Bloc, randomized_vector)


# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9",
          "B9","B9", "B9"
)

Bloc.9 <- data.frame(Bloc, randomized_vector)


# Randomize the order of groups
group_names <- names(groups)
group_names <- sample(group_names)

# Create the randomized vector
randomized_vector <- c()

# Randomize the numbers within each group and add to the vector
for (group_name in group_names) {
  numbers <- groups[[group_name]]
  numbers <- sample(numbers)
  randomized_vector <- c(randomized_vector, numbers)
}

# Print the results
print("Randomized group order with numbers shuffled within each group:")
print(randomized_vector)# Define the groups

Bloc <- c("B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10",
          "B10","B10", "B10"
)

Bloc.10 <- data.frame(Bloc, randomized_vector)

library(tidyverse)

rm(Bloc)
rm(randomized_vector)

#Join all dataframes

random_list <- Bloc.1 %>% 
 rbind(Bloc.2, Bloc.3, Bloc.4, Bloc.5, Bloc.6, Bloc.7, Bloc.8, Bloc.9, Bloc.10) %>%
  write.csv("C:/Users/User/OneDrive/Documents/Entomopathologie_workshop/Data/liste_aléatoire.csv")

#read csv
liste_aléatoire <- read.csv("liste_aléatoire.csv", header = T, row.names = 1)
Trt_table <- read.table("Trt_table.txt", header = T)
Trt_list <- Trt_table %>% 
  select(c(Bloc, code_names, randomized_vector)) 



#vecteur d'ordre
vecteur_ordre <- c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27)
order <- c(vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre,vecteur_ordre)

#Ajout liste aléatoire
liste_aléatoire <- liste_aléatoire %>% 
  cbind(order)

liste_aléatoire <- as_tibble(liste_aléatoire)
liste_aléatoire$Bloc <- as.factor(liste_aléatoire$Bloc)
liste_aléatoire$randomized_vector <- as.factor(liste_aléatoire$randomized_vector)

Trt_list$Bloc <- as.factor(Trt_list$Bloc)
Trt_list$randomized_vector <- as.factor(Trt_list$randomized_vector)

liste_finale <- liste_aléatoire %>% 
  left_join(Trt_list, join_by(Bloc, randomized_vector)) %>% 
  write.csv("C:/Users/User/OneDrive/Documents/Entomopathologie_workshop/Data/liste_finale.csv")
  
liste_finale$code_names <- as.factor(liste_finale$code_names)

liste_finale$name = paste(liste_finale$order, liste_finale$code_names, liste_finale$Bloc, sep = "-") 

 
imprimer = liste_finale$name

imprimer <- imprimer %>% 
  as.tibble() %>% 
  write.csv("C:/Users/User/OneDrive/Documents/Entomopathologie_workshop/Data/imprimer.csv")
